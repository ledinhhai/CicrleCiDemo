 version: 2.1
 
 orbs:
  win: circleci/windows@2.2.0
 
 jobs:
   build:
     executor: win/default     
     steps:
      - checkout
      - run: 
          name: restore 
          command: dotnet restore CicrleCiDemo/CicrleCiDemo.csproj
     
      - run: 
          name: build project
          command: dotnet build CicrleCiDemo/CicrleCiDemo.csproj
      
   deploy:
     machine: # executor type
      image: ubuntu-1604:201903-01
     steps:
      - run:
          command: ssh haild@115.73.217.80 -p 2020 ./deploy.sh
   deploy-window:
     executor: win/default
     steps:
      - run:
          command: ssh nghia@115.73.217.80 -p 21 ./deploy.sh
         
 workflows:
   version: 2
   my_workflows:
    jobs:
     - build
     - deploy:
         requires:
           - build
     - deploy-window:
         requires:
           - build
