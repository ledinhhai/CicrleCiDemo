 version: 2.1
 
 orbs:
  win: circleci/windows@2.2.0
 
 jobs:
   build:
     executor: win/default     
     steps:
      - checkout
      - run: 
          name: restore 
          command: dotnet restore CicrleCiDemo/CicrleCiDemo.csproj
     
      - run: 
          name: build project
          command: dotnet build CicrleCiDemo/CicrleCiDemo.csproj
      
   deploy:
     machine: # executor type
      image: ubuntu-1604:201903-01
     steps:
      - run:
          command: ssh haild@115.73.217.80 -p 2020 ./deploy.sh
   deploy-window:
     machine: # executor type
      image: ubuntu-1604:201903-01
     steps:
      - add_ssh_keys:
          fingerprints:
            - 64:8d:2b:34:63:52:b7:6c:ee:16:81:40:b5:fa:46:13
      - run:
          command: ssh nghia@115.73.217.80 -p 21 deploy.bat 
         
 workflows:
   version: 2
   my_workflows:
    jobs:
     - build
     - deploy-window:
         requires:
           - build
